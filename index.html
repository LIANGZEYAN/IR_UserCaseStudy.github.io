<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>用户调研页面</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f9f9f9;
    }
    .query {
      font-size: 24px;
      margin-bottom: 20px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      grid-gap: 10px;
    }
    .card {
      background: #fff;
      border: 2px solid #ddd;
      padding: 10px;
      text-align: center;
      cursor: pointer;
      transition: border-color 0.3s;
    }
    .card:hover {
      border-color: #aaa;
    }
    .card.selected {
      border-color: #007BFF;
      background: #e7f1ff;
    }
    .submit-btn {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 18px;
      background: #007BFF;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .submit-btn:disabled {
      background: #ccc;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
  <div id="container">
    <div class="query" id="queryText">查询文本</div>
    <div class="grid" id="gridContainer">
      <!-- 16 个文档卡片会动态生成 -->
    </div>
    <button class="submit-btn" id="submitBtn" disabled>提交</button>
  </div>

  <script>
    // 示例数据：每个页面包含一个查询文本和 16 个文档
    const pages = [
      {
        query: "查询1：请点击您认为与查询相关的文档。",
        docs: Array.from({ length: 16 }, (_, i) => ({ id: i + 1, title: "文档 " + (i + 1) }))
      },
      {
        query: "查询2：请选择您认为相关的文档。",
        docs: Array.from({ length: 16 }, (_, i) => ({ id: i + 1, title: "文档 " + (i + 1) }))
      }
      // 可根据需要增加更多页面
    ];

    let currentPageIndex = 0;
    let selectedDocId = null;

    const queryText = document.getElementById("queryText");
    const gridContainer = document.getElementById("gridContainer");
    const submitBtn = document.getElementById("submitBtn");

    // 加载当前页面的数据
    function loadPage(pageIndex) {
      const pageData = pages[pageIndex];
      queryText.textContent = pageData.query;
      gridContainer.innerHTML = "";
      selectedDocId = null;
      submitBtn.disabled = true;

      pageData.docs.forEach(doc => {
        const card = document.createElement("div");
        card.className = "card";
        card.textContent = doc.title;
        card.addEventListener("click", function() {
          // 取消之前选中的卡片
          const prevSelected = document.querySelector(".card.selected");
          if (prevSelected) {
            prevSelected.classList.remove("selected");
          }
          // 选中当前卡片
          card.classList.add("selected");
          selectedDocId = doc.id;
          submitBtn.disabled = false;
        });
        gridContainer.appendChild(card);
      });
    }

    submitBtn.addEventListener("click", function() {
      if (selectedDocId === null) return;
      // 此处可将选择记录提交到后端或保存至本地
      console.log("第 " + (currentPageIndex + 1) + " 页选择：文档 " + selectedDocId);

      // 跳转到下一页
      currentPageIndex++;
      if (currentPageIndex < pages.length) {
        loadPage(currentPageIndex);
      } else {
        // 所有页面完成后显示结束信息
        document.getElementById("container").innerHTML = "<h2>感谢您的参与！</h2>";
      }
    });

    // 初次加载第一个页面
    loadPage(currentPageIndex);
  </script>
</body>
</html>
